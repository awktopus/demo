<table>
  <tr>
    <th>
      <label class="heading-label">Income & Expense Report</label>
    </th>
  </tr>
</table>
<div>
  <mat-spinner *ngIf='!isIETDataFetched' diameter='20'></mat-spinner>
  <span *ngIf='!isIETDataFetched'>Processing...</span>
</div>
<table class="trackertable4" *ngIf='isIETDataFetched'>
  <tr align="left">
    <td colspan="12">
      <button mat-stroked-button (click)="navigateIETracker()">
        Back
        <mat-icon>
          reply</mat-icon>
      </button>
    </td>
  </tr>
</table>


<table class="trackertable" *ngIf='isIETDataFetched'>
  <tr>
    <td align="left">
      <h6> {{ companyName }} </h6>
    </td>
    <td align="left">
      <mat-form-field class="casefield" appearance="outline">
        <mat-label>Select Fiscal Year</mat-label>
        <mat-select [(ngModel)]="fiscalYear" 
        (selectionChange)="getCompanyYearlyReceipts()">
          <mat-option *ngFor="let fiscalYr of fiscalYears" [value]="fiscalYr">
             {{ [fiscalClosingMonth] }}/{{ fiscalYr }}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </td>
    <td align="left">
      <h6>Grand Total: {{ yearlySummaryAmount }} </h6>
    </td>

    <td align="left">
      <mat-form-field class="appfield2" appearance="outline">
        <mat-label>Download as</mat-label>
        <mat-select [(value)]="downloadAs" (selectionChange)="onDownloadAsSelection()">
          <mat-option value="PDF">
            PDF
          </mat-option>
          <mat-option value="CSV">
            CSV
          </mat-option>
        </mat-select>
      </mat-form-field>
       <button mat-icon-button  matTooltip="Download" (click)="downloadReport()">
          <mat-icon style="font-size: 40px;">get_app</mat-icon>
        </button>
     </td>
    <!-- <td colspan="6" align="left">
      <span *ngIf='!showDownloadSpinner'>
        <button mat-icon-button matTooltip="Yearly Receipts PDF Export ">
          <mat-icon class="iconcss" (click)="downloadYearlyReceipts()">cloud_download</mat-icon>
        </button>
      </span>
      <mat-spinner *ngIf='showDownloadSpinner' diameter='40'></mat-spinner>
      <span *ngIf='showDownloadSpinner'>Processing...</span>
   </td>
    <td colspan="6" align="left">
      <button mat-icon-button matTooltip="Yearly Receipts CSV Export ">
        <mat-icon class="iconcss" (click)="downloadYearlyReceiptsCSV()">archive
        </mat-icon>
      </button>
    </td> -->

  </tr>
</table>

<!-- <table>
  <tr align="center">
    <td>
      <mat-form-field class="casefield">
        <mat-select placeholder="Select Fiscal Year" [(ngModel)]="fiscalYear">
          <mat-option *ngFor="let fiscalYr of fiscalYears" [value]="fiscalYr">
            {{ fiscalYr }}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </td>
    <td>
      <button mat-raised-button color="accent" class="text-upper" (click)="getCompanyYearlyReceipts()">
        Submit
      </button>
    </td>
    <td>
      <button mat-raised-button color="accent" class="text-upper" (click)="cancelViewReport()">
        Cancel
      </button>
    </td>
  </tr>
</table> -->

<!-- <table>
  <tr>
    <td>
      <div class="loading-screen-wrapper" *ngIf="gridActionInprogress">
        <mat-progress-spinner [diameter]="50" [mode]="'indeterminate'">
        </mat-progress-spinner>
      </div>
    </td>
  </tr>
  <tr>
    <ag-grid-angular #agGridIncomeReceipts style="width: 98%; height: 500px; font-size:11pt; " 
    class="ag-theme-balham" [rowData]="allReceiptsgridData"
      [enableSorting]="true" [statusBar]="statusBar" [enableFilter]="true" 
      [columnDefs]="gridColumnDefs" [enableColResize]="true"
      [frameworkComponents]="frameworkComponents" [context]="context" 
      [pagination]="true" [paginationPageSize]="50" (gridReady)="onGridReady($event)"
      [rowHeight]="45" [autoGroupColumnDef]="autoGroupColumnDef" 
      [defaultColDef]="defaultColDef" [domLayout]="autoHeight"></ag-grid-angular>
  </tr>

</table> -->
<div style="margin-left: 1px;margin-right: 1px">
    <ag-grid-angular #agGridIncomeReceipts style="width: 75%; height: 500px; font-size:11pt; " 
    class="ag-theme-balham" [rowData]="allReceiptsgridData"
      [enableSorting]="true" [statusBar]="statusBar" [enableFilter]="true" 
      [columnDefs]="gridColumnDefs" [enableColResize]="true"
      [frameworkComponents]="frameworkComponents" [context]="context" 
      [pagination]="true" [paginationPageSize]="50" (gridReady)="onGridReady($event)"
      [rowHeight]="45" [autoGroupColumnDef]="autoGroupColumnDef"
      [defaultColDef]="defaultColDef" [domLayout]="autoHeight"></ag-grid-angular>
</div>