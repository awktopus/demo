<div fxLayout="column" *ngIf="viewType==='grid'">
    <div>
        <mat-spinner *ngIf='!isEZsignDataFetched' diameter='20'></mat-spinner>
        <span *ngIf='!isEZsignDataFetched'>Processing...</span>
    </div>
    <br>
    <table width=90% *ngIf='isEZsignDataFetched'>
        <tr>
            <td width=45%>
                <button *ngIf="ezSignDocsgridData" mat-raised-button color="accent" matTooltip="Create new ezsign document" (click)="launchNewEZSignDocument()">
                    <mat-icon>note_add</mat-icon>&nbsp;EZSIGN DOCUMENT
                </button>
                &nbsp;&nbsp;
                <button mat-icon-button *ngIf="ezSignDocsgridData" matTooltip="refresh" (click)="loadEZSignDocuments()">
                    <mat-icon>refresh</mat-icon>&nbsp;REFRESH
                </button>
            </td>
            <td align=right>
                <div *ngIf="ezSignDocsgridData && isEZsignDataFetched">
                    <mat-icon class='docicon' mdbRippleRadius matTooltip="Config Columns" (click)='openColumnConfig(ezsignapi)'>list_alt</mat-icon>
                    <mat-icon class='docicon' mdbRippleRadius (click)="gridExport('ezsign')" matTooltip="Export CSV">insert_link</mat-icon>
                    <mat-icon class='docicon' mdbRippleRadius (click)="resizeAll('ezsign')" matTooltip="Expand All">swap_horiz</mat-icon>
                    <mat-icon class='docicon' mdbRippleRadius (click)="fitsizeAll('ezsign')" matTooltip="Refit">tune</mat-icon>
                </div>
            </td>
        </tr>
    </table>

    <div fxLayout="column" *ngIf="!ezSignDocsgridData && isEZsignDataFetched">
        <table class="trackertable">
            <tr align="center">
                <td colspan="12">
                    <label class="heading-label">Start Sending PDF Document for Signing</label>
                    <hr>
                </td>
            </tr>
            <tr>
                <td colspan="12">
                    <mat-horizontal-stepper labelPosition="bottom" [linear]="isLinear" #stepper #eZSignWFStepper="matHorizontalStepper">

                        <mat-step completed="true" editable="false">
                            <ng-template matStepLabel matStepperIcon="edit">
                                <mat-icon>insert_drive_file</mat-icon>
                                <br>
                                <strong>Upload Document</strong>
                                <br> Upload PDF document to send for signing</ng-template>
                        </mat-step>
                        <mat-step>
                            <ng-template matStepLabel matStepperIcon="edit">
                                <mat-icon>group</mat-icon>
                                <br>
                                <strong>Add Signer, Field</strong>
                                <br/> Add signer by their email address,
                                <br/> Add field (Initial,Date,Signature and Text) in document</ng-template>
                        </mat-step>
                        <mat-step>
                            <ng-template matStepLabel matStepperIcon="edit">
                                <mat-icon>list_alt</mat-icon>
                                <br>
                                <strong>Move field</strong>
                                <br> Move field to the desired location</ng-template>
                        </mat-step>
                        <mat-step>
                            <ng-template matStepLabel matStepperIcon="edit">
                                <mat-icon>mail</mat-icon>
                                <br>
                                <strong>Send Invites</strong>
                                <br> Review and send invites for signing the document</ng-template>
                        </mat-step>
                    </mat-horizontal-stepper>
                </td>
            </tr>
            <tr>
                <td colspan="12">
                    <div class="uploadfilecontainer" (click)="fileInput.click()" appDragDrop (onFileDropped)="dragAndDropFile($event)">
                        <label class="heading-label">Drag and drop or Upload PDF or Word document here</label>
                        <input hidden multiple accept=".docx,.pdf" type="file" #fileInput (change)="uploadInputFile($event.target.files)">
                    </div>
                    <div class="files-list" *ngFor="let file of files;let i=index">
                        <p>{{ file.name }}</p>
                        <button class="delete-file" (click)="deleteAttachment(i)">
                            <img src="../../../../assets/imgs/Recycle_Bin_Full.png">
                        </button>
                    </div>
                </td>
            </tr>

            <tr>
                <td colspan="12">                
                    <div class="uploadbtn">
                            <mat-form-field class="appfield" *ngIf="files.length != 0" appearance="outline">
                                    <mat-label>Document Title</mat-label>
                                    <input required matInput [(ngModel)]="documentTitle">
                                    <mat-error *ngIf="documentTitle === null || documentTitle === ''">
                                        Document Title is required
                                    </mat-error>
                                </mat-form-field> &nbsp; &nbsp;
                        <span *ngIf='!showProcessSpinner'>
                            <button *ngIf="files.length != 0" mat-raised-button color="accent" matTooltip="Create new ezsign document" (click)="createNewEZSignDocument()">
                                UPLOAD
                            </button>
                        </span>
                        <mat-spinner *ngIf='showProcessSpinner' diameter='20'></mat-spinner>
                        <span *ngIf='showProcessSpinner'>Processing...</span>
                    </div>
                </td>
            </tr>
        </table>
    </div>

    <br/>
    <div style="margin-left: 1px;margin-right: 1px" *ngIf="ezSignDocsgridData && isEZsignDataFetched">
        <ag-grid-angular #agGrid id="ezSignDocsGrid" style="width: 100%;  font-size:11pt" class="ag-theme-balham" [rowData]="ezSignDocsgridData"
            [enableSorting]="true" [statusBar]="statusBar" [enableFilter]="true" [columnDefs]="gridColumnDefs" [enableColResize]="true"
            [pagination]="true" [paginationPageSize]="20" [frameworkComponents]="frameworkComponents" [context]="context" (firstDataRendered)="onFirstDataRendered($event,'ezsign')"
            [rowHeight]="rowHeight" [rowClass]="rowClass" [domLayout]="domLayout">
        </ag-grid-angular>
    </div>
</div>
<div *ngIf="viewType==='pagereview'">
    <app-docreview (switchToGridView)="switchToGridView()"></app-docreview>
</div>