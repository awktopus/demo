<table>
  <tr>
    <th>
      <button mat-stroked-button (click)="navigateInfoTracker()">
        Back
        <mat-icon>
          reply</mat-icon>
      </button> &nbsp;&nbsp;
      <label class="heading-label">Info Tracker Admin Report </label>
    </th>
  </tr>
</table>
<div>
  <mat-spinner *ngIf='!isInfoTrackerDataFetched' diameter='40'></mat-spinner>
  <span *ngIf='!isInfoTrackerDataFetched'>Processing...</span>
</div>

<!-- <table class="trackertable4" *ngIf='isInfoTrackerDataFetched'>
  <tr align="left">
    <td colspan="12">
      <button mat-stroked-button (click)="navigateInfoTracker()">
        Back
        <mat-icon>
          reply</mat-icon>
      </button>
    </td> -->
<!-- <mat-form-field class="casefield" appearance="outline">
            <mat-label>Select Reported Date</mat-label>
            <mat-select [(ngModel)]="reportedDate" 
            (selectionChange)="getReportedDateInfo()">
              <mat-option *ngFor="let reptDate of reportedDates" [value]="reptDate">
                 {{ reptDate }}
              </mat-option>
            </mat-select>
          </mat-form-field> -->
<!-- </tr> 

</table> -->

<mat-tab-group style='padding-left:15pt;padding-top:5pt' (focusChange)="changeTab($event)" #myTabGroup [selectedIndex]="selectedIndex">

  <mat-tab>
    <ng-template mat-tab-label>
      Ready for review ({{readyToReviewCount}})
    </ng-template>
    <table class="trackertable4" *ngIf='isInfoTrackerDataFetched'>
      <tr align="left">
        <td>
          <form [formGroup]="readyToReviewForm">
            <mat-form-field appearance="outline">
              <mat-label>Report date</mat-label>
              <input matInput [matDatepicker]="startDate" date="true" formControlName="readyToReviewStartDateControl">
              <mat-datepicker-toggle matSuffix [for]="startDate"></mat-datepicker-toggle>
              <mat-datepicker #startDate></mat-datepicker>
            </mat-form-field>
            &nbsp;
            <!-- <mat-form-field appearance="outline">
              <mat-label>End date</mat-label>
              <input matInput [matDatepicker]="endDate" date="true" formControlName="endDateFormControl">
              <mat-datepicker-toggle matSuffix [for]="endDate"></mat-datepicker-toggle>
              <mat-datepicker #endDate></mat-datepicker>
            </mat-form-field>
            &nbsp;
            <span *ngIf='!showRefreshSpinner'>
              <button [disabled]="adminViewReportForm.invalid" mat-raised-button color="accent" class="text-upper" (click)="loadInfoTrackUserReport()">
                Refresh
                <mat-icon>refresh</mat-icon>
              </button>
            </span>
            <mat-spinner *ngIf='showRefreshSpinner' diameter='40'></mat-spinner> -->
          </form>
        </td>
        <td align="left">
          <mat-form-field class="appfield2" appearance="outline">
            <mat-label>Download as</mat-label>
            <mat-select [(value)]="downloadAs" (selectionChange)="onDownloadAsSelection()">
              <mat-option value="CSV">
                EXCEL/CSV
              </mat-option>
            </mat-select>
          </mat-form-field>
          <button mat-icon-button matTooltip="Download" (click)="downloadReport()">
            <mat-icon style="font-size: 40px;">get_app</mat-icon>
          </button>
        </td>
      </tr>
    </table>

    <table width=99%>
      <tr>
        <td align=right width='30'>
        </td>
        <td align=right>
          <mat-icon class='docicon' mdbRippleRadius matTooltip="Config Columns" (click)='openColumnConfig(iTReadyForReviewGridApi)'>list_alt</mat-icon>
          <mat-icon class='docicon' mdbRippleRadius (click)="resizeAll('ReadyForReview')" matTooltip="Expand All">swap_horiz</mat-icon>
          <mat-icon class='docicon' mdbRippleRadius (click)="fitsizeAll('ReadyForReview')" matTooltip="Refit">tune</mat-icon>
        </td>
      </tr>
    </table>
    <div style="margin-left: 1px;margin-right: 1px">
      <ag-grid-angular #agReadyForReviewGridInfoTracker style="width: 100%; font-size:11pt; " class="ag-theme-balham" [rowData]="iTReadyForReviewGridData"
        [enableSorting]="true" [statusBar]="statusBar" [enableFilter]="true" [columnDefs]="readyForReviewGridColumnDefs" [enableColResize]="true"
        [frameworkComponents]="frameworkComponents" [context]="context" [pagination]="true" [paginationPageSize]="25" (gridReady)="onGridReady($event,'ReadyForReview')"
        [rowHeight]="45" [autoGroupColumnDef]="autoGroupColumnDef" (firstDataRendered)="onFirstDataRendered($event,'ReadyForReview')"
        [defaultColDef]="defaultColDef" [domLayout]="domLayout" [rowSelection]="rowSelection" [suppressRowClickSelection]="true"
        [suppressAggFuncInHeader]="true"></ag-grid-angular>
    </div>

    <span *ngIf='!showReviewSpinner'>
      <button *ngIf='readyToReviewCount > 0 && !curReviewStatus' mat-raised-button color="accent" class="text-upper" (click)="openAgreementDialogforReview()">
        Review
        <mat-icon>check_circle_outline</mat-icon>
      </button>
    </span>
    <mat-spinner *ngIf='showReviewSpinner' diameter='40'></mat-spinner>
    <span *ngIf='showReviewSpinner'>Processing...</span>
    &nbsp; &nbsp;

    <span *ngIf='!showAddendumSpinner'>
      <button *ngIf='readyToReviewCount > 0 && curReviewStatus' mat-raised-button color="accent" class="text-upper" (click)="openAgreementDialogforReview()">
        Review Addendum
        <mat-icon>check_circle_outline</mat-icon>
      </button>
    </span>
    <mat-spinner *ngIf='showAddendumSpinner' diameter='40'></mat-spinner>
    <span *ngIf='showAddendumSpinner'>Processing...</span>
    &nbsp; &nbsp;

  </mat-tab>

  <mat-tab>
    <ng-template mat-tab-label>
      Unknown ({{unknownCount}})
    </ng-template>
    <table class="trackertable4" *ngIf='isInfoTrackerDataFetched'>
      <tr align="left">
        <td>
          <form [formGroup]="unknownForm">
            <mat-form-field appearance="outline">
              <mat-label>Report date</mat-label>
              <input matInput [matDatepicker]="startDate" date="true" formControlName="unknownStartDateControl">
              <mat-datepicker-toggle matSuffix [for]="startDate"></mat-datepicker-toggle>
              <mat-datepicker #startDate></mat-datepicker>
            </mat-form-field>
            &nbsp;
          </form>
        </td>
        <td align="left">
          <mat-form-field class="appfield2" appearance="outline">
            <mat-label>Download as</mat-label>
            <mat-select [(value)]="downloadAs" (selectionChange)="onDownloadAsSelection()">
              <mat-option value="CSV">
                EXCEL/CSV
              </mat-option>
            </mat-select>
          </mat-form-field>
          <button mat-icon-button matTooltip="Download" (click)="downloadReport()">
            <mat-icon style="font-size: 40px;">get_app</mat-icon>
          </button>
        </td>
      </tr>
    </table>
    <table width=99%>
      <tr>
        <td align=right width='30'>
        </td>
        <td align=right>
          <mat-icon class='docicon' mdbRippleRadius matTooltip="Config Columns" (click)='openColumnConfig(iTUnknownGridApi)'>list_alt</mat-icon>
          <mat-icon class='docicon' mdbRippleRadius (click)="resizeAll('Unknown')" matTooltip="Expand All">swap_horiz</mat-icon>
          <mat-icon class='docicon' mdbRippleRadius (click)="fitsizeAll('Unknown')" matTooltip="Refit">tune</mat-icon>
        </td>
      </tr>
    </table>
    <div style="margin-left: 1px;margin-right: 1px">
      <ag-grid-angular #agUnknownGridInfoTracker style="width: 100%; font-size:11pt; " class="ag-theme-balham" [rowData]="iTUnknownGridData"
        [enableSorting]="true" [statusBar]="statusBar" [enableFilter]="true" [columnDefs]="unknownGridColumnDefs" [enableColResize]="true"
        [frameworkComponents]="frameworkComponents" [context]="context" [pagination]="true" [paginationPageSize]="25" (gridReady)="onGridReady($event,'Unknown')"
        [rowHeight]="45" [autoGroupColumnDef]="autoGroupColumnDef" (firstDataRendered)="onFirstDataRendered($event,'Unknown')"
        [defaultColDef]="defaultColDef" [domLayout]="domLayout"></ag-grid-angular>
    </div>
  </mat-tab>

  <mat-tab>
    <ng-template mat-tab-label>
      Reviewed
    </ng-template>
    <!-- <table class="trackertable4" *ngIf='isInfoTrackerDataFetched'>
          <tr align="left">
           <td>
              <form [formGroup]="adminViewReportForm">
                <mat-form-field appearance="outline">
                  <mat-label>Start date</mat-label>
                  <input matInput [matDatepicker]="startDate" date="true" formControlName="startDateFormControl">
                  <mat-datepicker-toggle matSuffix [for]="startDate"></mat-datepicker-toggle>
                  <mat-datepicker #startDate></mat-datepicker>
                </mat-form-field>
                &nbsp;
                <mat-form-field appearance="outline">
                  <mat-label>End date</mat-label>
                  <input matInput [matDatepicker]="endDate" date="true" formControlName="endDateFormControl">
                  <mat-datepicker-toggle matSuffix [for]="endDate"></mat-datepicker-toggle>
                  <mat-datepicker #endDate></mat-datepicker>
                </mat-form-field>
                &nbsp;
                <span *ngIf='!showRefreshSpinner'>
                  <button [disabled]="adminViewReportForm.invalid" mat-raised-button color="accent" class="text-upper" (click)="loadInfoTrackUserReport()">
                    Refresh
                    <mat-icon>refresh</mat-icon>
                  </button>
                </span>
                <mat-spinner *ngIf='showRefreshSpinner' diameter='40'></mat-spinner>
              </form>
            </td>    
            <td align="left">
              <mat-form-field class="appfield2" appearance="outline">
                <mat-label>Download as</mat-label>
                <mat-select [(value)]="downloadAs" (selectionChange)="onDownloadAsSelection()">
                  <mat-option value="CSV">
                    EXCEL/CSV
                  </mat-option>
                </mat-select>
              </mat-form-field>
              <button mat-icon-button matTooltip="Download" (click)="downloadReport()">
                <mat-icon style="font-size: 40px;">get_app</mat-icon>
              </button>
            </td>
          </tr>    
        </table> -->
    <table width=99%>
      <tr>
        <td align=right width='30'>
        </td>
        <td align=right>
          <mat-icon class='docicon' mdbRippleRadius matTooltip="Config Columns" (click)='openColumnConfig(iTReviewedGridApi)'>list_alt</mat-icon>
          <mat-icon class='docicon' mdbRippleRadius (click)="resizeAll('Reviewed')" matTooltip="Expand All">swap_horiz</mat-icon>
          <mat-icon class='docicon' mdbRippleRadius (click)="fitsizeAll('Reviewed')" matTooltip="Refit">tune</mat-icon>
        </td>
      </tr>
    </table>
    <div style="margin-left: 1px;margin-right: 1px">
      <ag-grid-angular #agReviewedGridInfoTracker style="width: 100%; font-size:11pt; " class="ag-theme-balham" [rowData]="iTReviewedGridData"
        [enableSorting]="true" [statusBar]="statusBar" [enableFilter]="true" [columnDefs]="reviewedGridColumnDefs" [enableColResize]="true"
        [frameworkComponents]="frameworkComponents" [context]="context" [pagination]="true" [paginationPageSize]="25" (gridReady)="onGridReady($event,'Reviewed')"
        [rowHeight]="45" [autoGroupColumnDef]="autoGroupColumnDef" (firstDataRendered)="onFirstDataRendered($event,'Reviewed')"
        [defaultColDef]="defaultColDef" [domLayout]="domLayout"></ag-grid-angular>
    </div>
  </mat-tab>
</mat-tab-group>